# Environment Setup

Colophon requires the following environment variables to operate successfully and interact with GitHub APIs:

## GitHub Settings

Values generated by GitHub when [Creating a GitHub App](app.md)

### `GITHUB_APP_ID`

> _e.g. `22615`_

### `GITHUB_APP_LINK`

> _e.g. `colophon-dev`_

### `GITHUB_CLIENT_ID`

> _e.g. `Iv1.c576b97bab9e78b4`_

### `GITHUB_CLIENT_SECRET`

> _e.g. `17a59c0da3a8401a0e5b16d35153a26451b20f42`_

### `GITHUB_PRIVATE_KEY`

You have two methods of passing the private key to the application:

- Populating this environment variable with the content of the generated `.pem` file
- Using the [`GITHUB_PRIVATE_KEY_PATH`](#GITHUB_PRIVATE_KEY_PATH) variable below and uploading the `.pem` file to your server

> _e.g. `-----BEGIN RSA PRIVATE KEY-----\neIEogIBAAKCAQEA0d...\n-----END RSA PRIVATE KEY-----`_

**_Hint_: convert the pem file into a single line with this command:**

```shell
awk 'NF {sub(/\r/, ""); printf "%s\\n",$0;}' colophon-app.2019-03-01.private-key.pem
```

### `GITHUB_PRIVATE_KEY_PATH`

> _e.g. `/path/to/colophon-app.2019-03-01.private-key.pem`_

### `GITHUB_WEBHOOK_SECRET`

Created by you when [Creating a GitHub App](app.md)

## App Settings

### `COLOPHON_LINK`

Domain where this service lives

**NOTE**: this is primarily used for the GitHub user authentication redirect, and should reflect the public facing URL & port your users will use, this is used independently from the [`COLOPHON_PORT`](#COLOPHON_PORT) value.

> _e.g. `https://colophon.my-company.com`_

### `COLOPHON_PORT`

Specifies the port we want to listen to. _(Defaults to `3000`)_

**NOTE**: if you're using a PaaS environment that dynamically assigns `PORT` value, simply keep this value empty and Colophon will use `PORT` instead.

> _e.g. `localhost:3000`_

### `COLOPHON_SESSION_SECRET`

Cookie Session secret

> _e.g. `my-super-secret-cookie-secret`_

## Database config

Colophon requires a PostgreSQL database instance, you can find the database initialization scheams under the [`database` folder](./database/)

Please use an appropriately managed/scaled database server then direct Colophon to connect to it using the following environment variables:

### `POSTGRES_HOST`

The database server host address

> _e.g. `localhost`_

### `POSTGRES_PORT`

The database server port

> _e.g. `5432`_

### `POSTGRES_DB`

The database name

> _e.g. `colophon_db`_

### `POSTGRES_USER`

The database user

> _e.g. `colophon_user`_

### `POSTGRES_PASSWORD`

The database user password

> _e.g. `colophon_user_password`_
